### üìÑ **README.md**

# üë§ **Face Verification API**  
**FastAPI —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –ª–∏—Ü—É.**  

---

##  **–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞**  

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç API –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏—Ö –ª–∏—Ü–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ **InsightFace**.  
-  **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ –ª–∏—Ü–∞, —Å–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥ –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä.  
-  **–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ –ª–∏—Ü–∞, —Å–∏—Å—Ç–µ–º–∞ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ª–∏—á–Ω–æ—Å—Ç—å.  

---

##  **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**  

- **Python 3.10+**  
- **FastAPI** ‚Äî —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è API.  
- **InsightFace** ‚Äî —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ª–∏—Ü.  
- **OpenCV** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.  
- **Scikit-learn** ‚Äî –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —Å—Ö–æ–∂–µ—Å—Ç–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤.  
- **NumPy** ‚Äî —á–∏—Å–ª–æ–≤—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è.  
- **Uvicorn** ‚Äî ASGI-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –∑–∞–ø—É—Å–∫–∞ FastAPI.  

---

## üìÇ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞**  

```
/face_verification
‚îú‚îÄ‚îÄ main.py          # –û—Å–Ω–æ–≤–Ω–æ–π API —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ database.py      # –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º–∏
‚îú‚îÄ‚îÄ /data            # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îú‚îÄ‚îÄ /embeddings_db   # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
‚îî‚îÄ‚îÄ requirements.txt # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
```

---

##  **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API**  

###  **1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**  
**POST /register/**  

- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**  
   - `file`: –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ñ–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è).  

- **–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ (cURL):**  
   ```bash
   curl -X POST "http://0.0.0.0:8003/register/" \
   -F "file=@path_to_image.jpg"
   ```

- **–û—Ç–≤–µ—Ç:**  
   ```json
   {
     "message": "‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω"
   }
   ```

---

###  **2. –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**  
**POST /verify/**  

- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**  
   - `file`: –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ñ–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è).  

- **–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ (cURL):**  
   ```bash
   curl -X POST "http://0.0.0.0:8003/verify/" \
   -F "file=@path_to_image.jpg"
   ```

- **–û—Ç–≤–µ—Ç (—É—Å–ø–µ—à–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è):**  
   ```json
   {
     "message": "‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω"
   }
   ```

- **–û—Ç–≤–µ—Ç (–ø—Ä–æ–≤–∞–ª –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏):**  
   ```json
   {
     "message": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –æ–ø–æ–∑–Ω–∞–Ω"
   }
   ```

---

## üõ†Ô∏è **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**  

- **–ü–∞–ø–∫–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –≤–∞–º–∏
- **–ü–æ—Ä–æ–≥ —Å—Ö–æ–∂–µ—Å—Ç–∏:** `THRESHOLD = 0.6` (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ `main.py`)  

---

##  **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?**  

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:**  
   - –§–æ—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è.  
   - –°–æ–∑–¥–∞—ë—Ç—Å—è —ç–º–±–µ–¥–¥–∏–Ω–≥ –ª–∏—Ü–∞.  
   - –≠–º–±–µ–¥–¥–∏–Ω–≥ –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π `user_id` —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.  

2. **–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è:**  
   - –ù–æ–≤–æ–µ —Ñ–æ—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è.  
   - –≠–º–±–µ–¥–¥–∏–Ω–≥ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è —Å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–º–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º–∏.  
   - –ï—Å–ª–∏ —Å—Ö–æ–∂–µ—Å—Ç—å –ø—Ä–µ–≤—ã—à–∞–µ—Ç `THRESHOLD`, –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞.  

---

##  **–û—Ç–ª–∞–¥–∫–∞ –∏ –æ—à–∏–±–∫–∏**  

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–∞–ø–∫–∏ `/data` –∏ `/embeddings_db` —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –∑–∞–ø–∏—Å–∏.  
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã.  
- –í —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º —Å InsightFace, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ OpenCV –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —á–∏—Ç–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.  

